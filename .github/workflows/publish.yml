name: Publish
on:
  push:
    branches: [ master ]

jobs:
  medium:
    runs-on: ubuntu-latest
    name: Publish to Medium
    steps:
    - uses: actions/checkout@v2

    - name: install httpie
      run: |
        pip install --upgrade httpie
        sudo ln -snf "$(which httpie)" /usr/local/bin/http

    - name: publish
      run: bin/publish
      env:
        MEDIUM_TOKEN: ${{ secrets.MEDIUM_TOKEN }}
        MEDIUM_AUTHOR_ID: ${{ secrets.MEDIUM_AUTHOR_ID }}
